# JAM-004: Project Registration System

**Priority**: üü° High  
**Effort**: 3-4 hours  
**Dependencies**: JAM-003 (profile system)  

## üìã Objective

Allow participants to register their project idea during onboarding. Each participant has one main project they'll develop throughout the program.

## ‚úÖ Acceptance Criteria

- [ ] Project creation form in onboarding
- [ ] One project per user constraint
- [ ] Project stages: IDEA ‚Üí PROTOTYPE ‚Üí BUILD ‚Üí PROJECT
- [ ] Shareable project URL (slug generation)
- [ ] Edit project details after creation
- [ ] Project displayed on user profile

## üõ†Ô∏è Implementation

### Files to Create/Modify
- `src/components/jam-platform/projects/ProjectForm.tsx`
- `src/app/api/jam/projects/route.ts`
- `src/app/jam/projects/[slug]/page.tsx` - Public project page
- `src/lib/jam/projects.ts` - Project utilities

### Project Form

```tsx
// src/components/jam-platform/projects/ProjectForm.tsx
export function ProjectForm({ onSubmit, initialData }) {
  return (
    <form onSubmit={handleSubmit}>
      <Input
        name="name"
        placeholder="Project Name"
        required
        maxLength={100}
      />
      
      <Textarea
        name="description"
        placeholder="What are you building? (2-3 sentences)"
        required
        maxLength={500}
      />
      
      <Select name="category">
        <option value="">Select Category</option>
        <option value="defi">DeFi</option>
        <option value="social">Social</option>
        <option value="gaming">Gaming</option>
        <option value="infra">Infrastructure</option>
        <option value="ai">AI/ML</option>
        <option value="other">Other</option>
      </Select>
      
      <Input
        name="website"
        placeholder="Website (optional)"
        type="url"
      />
      
      <Button type="submit">
        {initialData ? 'Update Project' : 'Create Project'}
      </Button>
    </form>
  );
}
```

### Project API

```typescript
// src/app/api/jam/projects/route.ts
export async function POST(request: Request) {
  const data = await request.json();
  const userId = await getUserId(request);
  
  // Check if user already has a project
  const existing = await db.select()
    .from(projects)
    .where(eq(projects.userId, userId))
    .limit(1);
    
  if (existing.length > 0) {
    return NextResponse.json(
      { error: 'User already has a project' },
      { status: 400 }
    );
  }
  
  // Generate unique slug
  const slug = generateSlug(data.name);
  
  // Create project
  const project = await db.insert(projects).values({
    userId,
    name: data.name,
    description: data.description,
    category: data.category,
    stage: 'IDEA',
    slug,
    website: data.website
  }).returning();
  
  return NextResponse.json(project[0]);
}
```

### Project Display

```tsx
// src/app/jam/projects/[slug]/page.tsx
export default async function ProjectPage({ params }) {
  const project = await getProjectBySlug(params.slug);
  
  if (!project) notFound();
  
  return (
    <div className="max-w-4xl mx-auto p-6">
      <ProjectHeader project={project} />
      <ProjectStageIndicator stage={project.stage} />
      <ProjectDetails project={project} />
      <ProjectLinks project={project} />
      <ProjectOwner user={project.user} />
    </div>
  );
}
```

### Stage Progression

```typescript
// src/lib/jam/projects.ts
export const PROJECT_STAGES = {
  IDEA: { next: 'PROTOTYPE', requiredQuests: 3 },
  PROTOTYPE: { next: 'BUILD', requiredQuests: 6 },
  BUILD: { next: 'PROJECT', requiredQuests: 10 },
  PROJECT: { next: null, requiredQuests: null }
};

export async function advanceProjectStage(projectId: string) {
  // Check quest completion
  // Update stage if requirements met
}
```

## üéØ Testing

1. **Project creation**
   - Form validation works
   - Slug is unique and URL-friendly
   - One project per user enforced

2. **Project viewing**
   - Public page accessible by slug
   - All details displayed correctly
   - Links work

3. **Project editing**
   - Owner can edit their project
   - Changes persist
   - Slug doesn't change

## üí° Notes

- Slug should be URL-friendly (lowercase, hyphens)
- Keep descriptions concise for display
- Stage advancement automatic based on quests
- Consider adding project images later

## üö® Potential Issues

- **Duplicate slugs**: Add random suffix if needed
- **Long names**: Truncate slug to reasonable length
- **Special characters**: Strip from slug generation
- **Project deletion**: Soft delete or archive instead