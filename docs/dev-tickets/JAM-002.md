# JAM-002: Para Authentication Integration

**Priority**: üî¥ Critical  
**Effort**: 3-4 hours  
**Dependencies**: JAM-001 (database ready)  

## üìã Objective

Integrate Para authentication to enable wallet and email-based login for the Jam platform. This is the gateway to all platform features.

## ‚úÖ Acceptance Criteria

- [ ] Para SDK integrated and configured
- [ ] Login page with wallet/email options
- [ ] User session management working
- [ ] Profile creation on first login
- [ ] Logout functionality
- [ ] Protected routes working

## üõ†Ô∏è Implementation

### Files to Create/Modify
- `src/lib/auth/para.ts` - Para client setup
- `src/app/jam/login/page.tsx` - Login page
- `src/app/api/auth/para/route.ts` - Auth API endpoint
- `src/components/jam-platform/auth/` - Auth components
- `.env.local` - Add Para API keys

### Para Setup

```typescript
// src/lib/auth/para.ts
import { ParaClient } from '@para/sdk';

export const paraClient = new ParaClient({
  apiKey: process.env.NEXT_PUBLIC_PARA_API_KEY!,
  environment: process.env.NODE_ENV === 'production' ? 'mainnet' : 'testnet'
});

// Helper functions
export async function authenticateUser(token: string) {
  // Verify Para token
  // Create/update user in database
  // Return user session
}
```

### Login Component

```tsx
// src/components/jam-platform/auth/ParaLogin.tsx
export function ParaLogin() {
  return (
    <div className="space-y-4">
      <Button onClick={connectWallet}>
        Connect Wallet
      </Button>
      <Button onClick={emailLogin}>
        Continue with Email
      </Button>
    </div>
  );
}
```

### Protected Route Wrapper

```tsx
// src/components/jam-platform/auth/ProtectedRoute.tsx
export function ProtectedRoute({ children }) {
  const { user, loading } = useAuth();
  
  if (loading) return <Spinner />;
  if (!user) redirect('/jam/login');
  
  return children;
}
```

## üéØ Testing

1. **Test wallet connection**
   - MetaMask works
   - WalletConnect works
   - User created in DB

2. **Test email login**
   - Email verification sent
   - Magic link works
   - Session persists

3. **Test protected routes**
   - Redirect to login if not authenticated
   - Dashboard accessible when logged in

## üí° Notes

- Para handles wallet signatures and email verification
- Store minimal user data (wallet address or email)
- Use Para user ID as primary identifier
- Session should persist across refreshes

## üö® Potential Issues

- **API Key**: Make sure Para API key is in `.env.local`
- **CORS**: Configure Para dashboard for localhost/production URLs
- **Wallet Support**: Test with MetaMask, Rainbow, Coinbase Wallet
- **Email Provider**: Para needs email provider configuration