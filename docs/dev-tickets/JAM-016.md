# JAM-016: Community Feed

**Priority**: üü° Medium  
**Effort**: 3-4 hours  
**Dependencies**: JAM-015 (posts)

## üìã Objective

Create a community feed where participants can discover Build in Public posts, engage with content, and see what others are building. This fosters community engagement.

## ‚úÖ Acceptance Criteria

- [ ] Community feed page with posts
- [ ] Filter by tags, authors, projects
- [ ] Search functionality
- [ ] Infinite scroll or pagination
- [ ] Post engagement metrics (views)
- [ ] Recent activity sidebar

## üõ†Ô∏è Implementation

### Files to Create/Modify

- `src/app/jam/community/page.tsx` - Community feed
- `src/components/jam-platform/community/PostFeed.tsx`
- `src/components/jam-platform/community/PostCard.tsx`
- `src/components/jam-platform/community/FeedFilters.tsx`

### Community Feed Page

```tsx
// src/app/jam/community/page.tsx
export default async function CommunityPage() {
  const posts = await getRecentPosts()
  const trendingTags = await getTrendingTags()
  const activeUsers = await getActiveUsers()

  return (
    <div className="container py-6">
      <div className="mb-6 flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold">Community</h1>
          <p className="text-foreground">See what the community is building</p>
        </div>

        <Button asChild>
          <Link href="/jam/community/create">
            <Plus className="mr-2 h-4 w-4" />
            Share Update
          </Link>
        </Button>
      </div>

      <div className="grid gap-6 lg:grid-cols-4">
        <div className="lg:col-span-3">
          <FeedFilters />
          <PostFeed initialPosts={posts} />
        </div>

        <div className="space-y-6">
          <TrendingTags tags={trendingTags} />
          <ActiveUsers users={activeUsers} />
          <CommunityStats />
        </div>
      </div>
    </div>
  )
}
```

### Post Feed Component

````tsx
// src/components/jam-platform/community/PostFeed.tsx
export function PostFeed({ initialPosts }) {
  const [posts, setPosts] = useState(initialPosts);
  const [loading, setLoading] = useState(false);
  const [hasMore, setHasMore] = useState(true);
  const [filters, setFilters] = useState({
    tag: '',
    author: '',
    search: ''
  });

  const loadMore = async () => {
    if (loading || !hasMore) return;

    setLoading(true);
    try {
      const newPosts = await fetchPosts({
        ...filters,
        offset: posts.length
      });

      if (newPosts.length === 0) {
        setHasMore(false);
      } else {
        setPosts(prev => [...prev, ...newPosts]);
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="space-y-6">
      {posts.map(post => (
        <PostCard key={post.id} post={post} />
      ))}

      {hasMore && (
        <div className="text-center">
          <Button onClick={loadMore} disabled={loading}>
            {loading ? 'Loading...' : 'Load More'}\n          </Button>\n        </div>\n      )}\n      \n      {!hasMore && posts.length === 0 && (\n        <EmptyState\n          title=\"No posts yet\"\n          description=\"Be the first to share your progress!\"\n          action={<Button asChild><Link href=\"/jam/community/create\">Create Post</Link></Button>}\n        />\n      )}\n    </div>\n  );\n}\n```\n\n### Post Card Component\n\n```tsx\n// src/components/jam-platform/community/PostCard.tsx\nexport function PostCard({ post }) {\n  return (\n    <Card>\n      <CardHeader>\n        <div className=\"flex items-start justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <Avatar className=\"h-10 w-10\">\n              <AvatarImage src={post.author.avatarUrl} />\n              <AvatarFallback>\n                {post.author.displayName.slice(0, 2).toUpperCase()}\n              </AvatarFallback>\n            </Avatar>\n            \n            <div>\n              <Link \n                href={`/jam/profile/${post.author.id}`}\n                className=\"font-medium hover:underline\"\n              >\n                {post.author.displayName}\n              </Link>\n              <div className=\"flex items-center gap-2 text-sm text-foreground\">\n                <span>{formatRelativeTime(post.createdAt)}</span>\n                {post.project && (\n                  <>\n                    <span>‚Ä¢</span>\n                    <Link \n                      href={`/jam/projects/${post.project.slug}`}\n                      className=\"hover:underline\"\n                    >\n                      {post.project.name}\n                    </Link>\n                  </>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          <PostActions post={post} />\n        </div>\n      </CardHeader>\n      \n      <CardContent>\n        <Link href={`/jam/posts/${post.slug}`}>\n          <h3 className=\"font-semibold text-lg mb-2 hover:underline\">\n            {post.title}\n          </h3>\n        </Link>\n        \n        <div className=\"prose prose-sm prose-neutral dark:prose-invert mb-4\">\n          <ReactMarkdown>\n            {truncateContent(post.content, 300)}\n          </ReactMarkdown>\n        </div>\n        \n        {post.tags.length > 0 && (\n          <div className=\"flex flex-wrap gap-2 mb-4\">\n            {post.tags.map(tag => (\n              <Link key={tag} href={`/jam/community?tag=${tag}`}>\n                <Badge variant=\"secondary\" className=\"hover:bg-secondary/80\">\n                  #{tag}\n                </Badge>\n              </Link>\n            ))}\n          </div>\n        )}\n        \n        <div className=\"flex items-center justify-between text-sm text-foreground\">\n          <div className=\"flex items-center gap-4\">\n            <span className=\"flex items-center gap-1\">\n              <Eye className=\"h-4 w-4\" />\n              {post.viewCount || 0} views\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <MessageSquare className=\"h-4 w-4\" />\n              {post.commentCount || 0} comments\n            </span>\n          </div>\n          \n          <Button variant=\"ghost\" size=\"sm\" asChild>\n            <Link href={`/jam/posts/${post.slug}`}>\n              Read more\n            </Link>\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n```\n\n### Feed Filters\n\n```tsx\n// src/components/jam-platform/community/FeedFilters.tsx\nexport function FeedFilters({ onFiltersChange }) {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedTag, setSelectedTag] = useState('');\n  const [sortBy, setSortBy] = useState('recent');\n  \n  const debouncedSearch = useDebounce(searchTerm, 300);\n  \n  useEffect(() => {\n    onFiltersChange({\n      search: debouncedSearch,\n      tag: selectedTag,\n      sort: sortBy\n    });\n  }, [debouncedSearch, selectedTag, sortBy]);\n  \n  return (\n    <div className=\"flex gap-4 mb-6 p-4 bg-muted/50 rounded-lg\">\n      <div className=\"flex-1\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-foreground\" />\n          <Input\n            placeholder=\"Search posts...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n      </div>\n      \n      <Select value={selectedTag} onValueChange={setSelectedTag}>\n        <SelectTrigger className=\"w-[180px]\">\n          <SelectValue placeholder=\"Filter by tag\" />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"\">All tags</SelectItem>\n          <SelectItem value=\"learning\">Learning</SelectItem>\n          <SelectItem value=\"progress\">Progress</SelectItem>\n          <SelectItem value=\"demo\">Demo</SelectItem>\n          <SelectItem value=\"challenge\">Challenge</SelectItem>\n          <SelectItem value=\"win\">Win</SelectItem>\n        </SelectContent>\n      </Select>\n      \n      <Select value={sortBy} onValueChange={setSortBy}>\n        <SelectTrigger className=\"w-[150px]\">\n          <SelectValue />\n        </SelectTrigger>\n        <SelectContent>\n          <SelectItem value=\"recent\">Most Recent</SelectItem>\n          <SelectItem value=\"popular\">Most Popular</SelectItem>\n          <SelectItem value=\"commented\">Most Discussed</SelectItem>\n        </SelectContent>\n      </Select>\n    </div>\n  );\n}\n```\n\n### Sidebar Components\n\n```tsx\n// Trending Tags Widget\nexport function TrendingTags({ tags }) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Trending Tags</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex flex-wrap gap-2\">\n          {tags.map(tag => (\n            <Link key={tag.name} href={`/jam/community?tag=${tag.name}`}>\n              <Badge variant=\"secondary\" className=\"hover:bg-secondary/80\">\n                #{tag.name} ({tag.count})\n              </Badge>\n            </Link>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\n// Active Users Widget\nexport function ActiveUsers({ users }) {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle className=\"text-lg\">Active This Week</CardTitle>\n      </CardHeader>\n      <CardContent>\n        <div className=\"space-y-3\">\n          {users.map(user => (\n            <div key={user.id} className=\"flex items-center gap-2\">\n              <Avatar className=\"h-8 w-8\">\n                <AvatarImage src={user.avatarUrl} />\n                <AvatarFallback>\n                  {user.displayName.slice(0, 2)}\n                </AvatarFallback>\n              </Avatar>\n              <div className=\"flex-1\">\n                <Link \n                  href={`/jam/profile/${user.id}`}\n                  className=\"text-sm font-medium hover:underline\"\n                >\n                  {user.displayName}\n                </Link>\n                <div className=\"text-xs text-foreground\">\n                  {user.postCount} posts this week\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n```\n\n## üéØ Testing\n\n1. **Feed functionality**\n   - Posts load correctly\n   - Filters work properly\n   - Search returns relevant results\n\n2. **Performance**\n   - Infinite scroll smooth\n   - Search debounced\n   - Images load efficiently\n\n3. **Engagement**\n   - View counts increment\n   - Links navigation works\n   - Social features function\n\n## üí° Notes\n\n- Cache trending tags for performance\n- Consider adding likes/reactions later\n- Enable post bookmarking\n- Add RSS feed for community\n\n## üö® Potential Issues\n\n- **Performance**: Optimize image loading\n- **Search**: May need full-text search later\n- **Spam**: Implement content moderation\n- **Mobile**: Ensure responsive design
````
