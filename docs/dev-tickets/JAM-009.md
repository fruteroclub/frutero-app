# JAM-009: External Program Discovery Interface

**Priority**: üü° High  
**Effort**: 3-4 hours  
**Dependencies**: JAM-006 (API structure)  

## üìã Objective

Create an interface for discovering and tracking external programs (hackathons, courses, incubators) that participants join alongside the Frutero Jam mentorship program.

## ‚úÖ Acceptance Criteria

- [ ] Program listing page with cards
- [ ] Filter by date, category, track
- [ ] Program detail view
- [ ] Join/track program functionality
- [ ] Application deadline warnings
- [ ] External links to program websites

## üõ†Ô∏è Implementation

### Files to Create/Modify
- `src/app/jam/programs/page.tsx` - Program listing
- `src/app/jam/programs/[id]/page.tsx` - Program details
- `src/components/jam-platform/programs/` - Program components
- `src/app/api/jam/programs/route.ts` - Programs API

### Program Listing Page

```tsx
// src/app/jam/programs/page.tsx
export default async function ProgramsPage() {
  const programs = await getActivePrograms();
  const userPrograms = await getUserPrograms();
  
  return (
    <div className="container py-6">
      <div className="flex justify-between items-center mb-6">
        <h1 className="text-3xl font-bold">External Programs</h1>
        <ProgramFilters />
      </div>
      
      <div className="mb-6">
        <Alert>
          <Info className="h-4 w-4" />
          <AlertDescription>
            Join external hackathons and courses to apply your learnings. 
            Your mentor will guide you through these programs.
          </AlertDescription>
        </Alert>
      </div>
      
      <Tabs defaultValue="recommended">
        <TabsList>
          <TabsTrigger value="recommended">Recommended</TabsTrigger>
          <TabsTrigger value="enrolled">My Programs</TabsTrigger>
          <TabsTrigger value="all">All Programs</TabsTrigger>
        </TabsList>
        
        <TabsContent value="recommended">
          <ProgramGrid programs={programs.recommended} />
        </TabsContent>
        
        <TabsContent value="enrolled">
          <ProgramGrid programs={userPrograms} enrolled />
        </TabsContent>
        
        <TabsContent value="all">
          <ProgramGrid programs={programs.all} />
        </TabsContent>
      </Tabs>
    </div>
  );
}
```

### Program Card Component

```tsx
// src/components/jam-platform/programs/ProgramCard.tsx
export function ProgramCard({ program, isEnrolled = false }) {
  const daysUntilDeadline = getDaysUntil(program.submissionDeadline);
  const isUrgent = daysUntilDeadline <= 3;
  
  return (
    <Card className="hover:shadow-lg transition-shadow">
      <CardHeader>
        <div className="flex justify-between items-start">
          <div>
            <CardTitle>{program.name}</CardTitle>
            <p className="text-sm text-muted-foreground">
              by {program.organizer}
            </p>
          </div>
          {program.avatarUrl && (
            <img 
              src={program.avatarUrl} 
              alt={program.name}
              className="w-12 h-12 rounded"
            />
          )}
        </div>
        
        <div className="flex flex-wrap gap-2 mt-2">
          {program.tracks.map(track => (
            <Badge key={track} variant="secondary">
              {track}
            </Badge>
          ))}
          {program.totalPrizes && (
            <Badge variant="default">
              ${program.totalPrizes.toLocaleString()} in prizes
            </Badge>
          )}
        </div>
      </CardHeader>
      
      <CardContent>
        <p className="text-muted-foreground mb-4">
          {program.description}
        </p>
        
        <div className="space-y-2 text-sm">
          <div className="flex justify-between">
            <span>Start Date:</span>
            <span>{formatDate(program.startDate)}</span>
          </div>
          <div className="flex justify-between">
            <span>End Date:</span>
            <span>{formatDate(program.endDate)}</span>
          </div>
          {program.submissionDeadline && (
            <div className={`flex justify-between ${isUrgent ? 'text-red-500' : ''}`}>
              <span>Application Deadline:</span>
              <span>
                {isUrgent && '‚ö†Ô∏è '}
                {daysUntilDeadline} days left
              </span>
            </div>
          )}
        </div>
        
        <div className="flex gap-2 mt-4">
          {isEnrolled ? (
            <Button variant="secondary" disabled className="flex-1">
              <Check className="h-4 w-4 mr-2" />
              Enrolled
            </Button>
          ) : (
            <Button 
              variant="outline" 
              className="flex-1"
              onClick={() => trackProgram(program.id)}
            >
              Track Program
            </Button>
          )}
          <Button asChild>
            <a href={program.applicationUrl} target="_blank" rel="noopener">
              <ExternalLink className="h-4 w-4 mr-2" />
              Apply
            </a>
          </Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

### Program Filters

```tsx
// src/components/jam-platform/programs/ProgramFilters.tsx
export function ProgramFilters() {
  return (
    <div className="flex gap-2">
      <Select>
        <SelectTrigger className="w-[180px]">
          <SelectValue placeholder="Category" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="all">All Categories</SelectItem>
          <SelectItem value="hackathon">Hackathons</SelectItem>
          <SelectItem value="course">Courses</SelectItem>
          <SelectItem value="incubator">Incubators</SelectItem>
          <SelectItem value="bootcamp">Bootcamps</SelectItem>
        </SelectContent>
      </Select>
      
      <Select>
        <SelectTrigger className="w-[180px]">
          <SelectValue placeholder="Track" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="all">All Tracks</SelectItem>
          <SelectItem value="defi">DeFi</SelectItem>
          <SelectItem value="nft">NFT</SelectItem>
          <SelectItem value="infrastructure">Infrastructure</SelectItem>
          <SelectItem value="gaming">Gaming</SelectItem>
          <SelectItem value="ai">AI</SelectItem>
        </SelectContent>
      </Select>
      
      <Select>
        <SelectTrigger className="w-[180px]">
          <SelectValue placeholder="Timeline" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="upcoming">Upcoming</SelectItem>
          <SelectItem value="active">Active Now</SelectItem>
          <SelectItem value="past">Past</SelectItem>
        </SelectContent>
      </Select>
    </div>
  );
}
```

### Program API

```typescript
// src/app/api/jam/programs/[id]/join/route.ts
export const POST = withAuth(async (request: Request, { params }) => {
  const programId = params.id;
  const userId = request.user.id;
  const { track } = await request.json();
  
  // Check if already enrolled
  const existing = await db.select()
    .from(programUsersTable)
    .where(
      and(
        eq(programUsersTable.programId, programId),
        eq(programUsersTable.userId, userId)
      )
    )
    .limit(1);
    
  if (existing[0]) {
    throw new ConflictError('Already enrolled in this program');
  }
  
  // Enroll user
  await db.insert(programUsersTable).values({
    programId,
    userId,
    track: track || 'professional',
    status: 'active',
    joinedAt: new Date()
  });
  
  // Create related quests if any
  await assignProgramQuests(userId, programId);
  
  return successResponse({ enrolled: true }, 'Successfully enrolled');
});
```

### Program Detail Page

```tsx
// src/app/jam/programs/[id]/page.tsx
export default async function ProgramDetailPage({ params }) {
  const program = await getProgram(params.id);
  const participants = await getProgramParticipants(params.id);
  const isEnrolled = await isUserEnrolled(params.id);
  
  return (
    <div className="container max-w-4xl py-6">
      <ProgramHeader program={program} />
      
      <div className="grid md:grid-cols-3 gap-6 mt-6">
        <div className="md:col-span-2">
          <ProgramDescription program={program} />
          <ProgramTracks tracks={program.tracks} />
          <ProgramTimeline program={program} />
        </div>
        
        <div className="space-y-4">
          <ProgramStats 
            participants={participants.length}
            prizes={program.totalPrizes}
          />
          <ProgramActions 
            program={program}
            isEnrolled={isEnrolled}
          />
          <ProgramParticipants participants={participants} />
        </div>
      </div>
    </div>
  );
}
```

## üéØ Testing

1. **Program display**
   - Cards show all info
   - Filters work correctly
   - Deadline warnings visible

2. **Enrollment**
   - Can track programs
   - Can't double-enroll
   - Status updates correctly

3. **External links**
   - Application links work
   - Open in new tabs
   - Track link clicks

## üí° Notes

- Programs are external, we just track participation
- Pre-populate with popular hackathons
- Consider calendar integration later
- Track which programs lead to success

## üö® Potential Issues

- **External links**: Validate URLs
- **Deadline timezone**: Use UTC consistently
- **Program updates**: External changes need sync
- **Filtering performance**: Index key fields