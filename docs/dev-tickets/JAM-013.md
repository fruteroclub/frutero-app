# JAM-013: Track Selection System

**Priority**: üü° High  
**Effort**: 2-3 hours  
**Dependencies**: JAM-003 (onboarding)  

## üìã Objective

Implement the track selection system that determines participant path: Founder, Professional, or Freelancer. This affects quest assignments and mentor matching.

## ‚úÖ Acceptance Criteria

- [ ] Track selection during onboarding
- [ ] Track-specific quest assignments
- [ ] Track info pages with descriptions
- [ ] Ability to change tracks (limited)
- [ ] Track-based mentor filtering
- [ ] Track progress analytics

## üõ†Ô∏è Implementation

### Files to Create/Modify
- `src/components/jam-platform/tracks/TrackSelection.tsx`
- `src/app/jam/tracks/page.tsx` - Track info
- `src/lib/jam/tracks.ts` - Track logic
- `src/app/api/jam/users/track/route.ts`

### Track Definitions

```typescript
// src/lib/jam/tracks.ts
export const TRACKS = {
  founder: {
    title: 'Founder Track',
    description: 'Build and launch your startup',
    icon: 'üöÄ',
    goals: [
      'Validate your product idea',
      'Build an MVP',
      'Get first users',
      'Raise pre-seed funding'
    ],
    questTypes: ['product', 'market', 'fundraising'],
    mentorExpertise: ['startup', 'product', 'fundraising'],
    color: 'blue'
  },
  professional: {
    title: 'Professional Track', 
    description: 'Level up your tech career',
    icon: 'üíº',
    goals: [
      'Land a senior dev role',
      'Master new technologies',
      'Build a strong portfolio',
      'Expand your network'
    ],
    questTypes: ['technical', 'portfolio', 'networking'],
    mentorExpertise: ['engineering', 'career', 'leadership'],
    color: 'green'
  },
  freelancer: {
    title: 'Freelancer Track',
    description: 'Build your independent practice',
    icon: 'üéØ',
    goals: [
      'Build a client base',
      'Master service delivery',
      'Scale your rates',
      'Achieve location independence'
    ],
    questTypes: ['client', 'delivery', 'business'],
    mentorExpertise: ['consulting', 'business', 'marketing'],
    color: 'purple'
  }
};
```

### Track Selection Component

```tsx
// src/components/jam-platform/tracks/TrackSelection.tsx
export function TrackSelection({ selectedTrack, onSelect }) {
  return (
    <div className="space-y-6">
      <div className="text-center">
        <h2 className="text-2xl font-bold">Choose Your Path</h2>
        <p className="text-muted-foreground mt-2">
          Select the track that matches your goals. This will customize 
          your quests and mentor recommendations.
        </p>
      </div>
      
      <div className="grid md:grid-cols-3 gap-6">
        {Object.entries(TRACKS).map(([key, track]) => (
          <TrackCard
            key={key}
            trackKey={key}
            track={track}
            selected={selectedTrack === key}
            onSelect={() => onSelect(key)}
          />
        ))}
      </div>
      
      {selectedTrack && (
        <TrackDetails track={TRACKS[selectedTrack]} />
      )}
    </div>
  );
}

function TrackCard({ trackKey, track, selected, onSelect }) {
  return (
    <Card 
      className={cn(
        "cursor-pointer transition-all hover:shadow-lg",
        selected && "ring-2 ring-primary"
      )}
      onClick={onSelect}
    >
      <CardHeader className="text-center">
        <div className="text-4xl mb-2">{track.icon}</div>
        <CardTitle>{track.title}</CardTitle>
        <CardDescription>{track.description}</CardDescription>
      </CardHeader>
      
      <CardContent>
        <div className="space-y-3">
          <div>
            <h4 className="font-medium text-sm mb-2">Key Goals:</h4>
            <ul className="text-sm text-muted-foreground space-y-1">
              {track.goals.slice(0, 2).map((goal, i) => (
                <li key={i} className="flex items-center">
                  <Check className="h-3 w-3 mr-2 text-primary" />
                  {goal}
                </li>
              ))}
            </ul>
          </div>
          
          <Button 
            variant={selected ? "default" : "outline"} 
            className="w-full"
          >
            {selected ? "Selected" : "Choose Track"}
          </Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

### Track-Specific Quest Assignment

```typescript
// src/lib/jam/tracks.ts
export async function getTrackQuests(track: string, week: number) {
  return await db.select()
    .from(questsTable)
    .where(
      and(
        eq(questsTable.week, week),
        or(
          eq(questsTable.track, track),
          eq(questsTable.track, 'all'),
          inArray(questsTable.category, TRACKS[track].questTypes)
        )
      )
    );
}

export async function updateUserTrack(userId: string, newTrack: string) {
  // Update user profile
  await db.update(profilesTable)
    .set({ track: newTrack })
    .where(eq(profilesTable.userId, userId));
  
  // Reassign quests for new track
  await reassignTrackQuests(userId, newTrack);
  
  // Update mentor recommendations
  await updateMentorRecommendations(userId);
}
```

### Track Information Page

```tsx
// src/app/jam/tracks/page.tsx
export default function TracksInfoPage() {
  return (
    <div className="container py-6">
      <div className="text-center mb-8">
        <h1 className="text-3xl font-bold">Development Tracks</h1>
        <p className="text-muted-foreground mt-2">
          Three paths to success in the Impact Technology space
        </p>
      </div>
      
      <div className="space-y-8">
        {Object.entries(TRACKS).map(([key, track]) => (
          <TrackDetailSection key={key} trackKey={key} track={track} />
        ))}
      </div>
    </div>
  );
}

function TrackDetailSection({ trackKey, track }) {
  return (
    <Card>
      <CardHeader>
        <div className="flex items-center gap-3">
          <div className="text-3xl">{track.icon}</div>
          <div>
            <CardTitle>{track.title}</CardTitle>
            <CardDescription>{track.description}</CardDescription>
          </div>
        </div>
      </CardHeader>
      
      <CardContent>
        <div className="grid md:grid-cols-2 gap-6">
          <div>
            <h3 className="font-semibold mb-3">Goals & Outcomes</h3>
            <ul className="space-y-2">
              {track.goals.map((goal, i) => (
                <li key={i} className="flex items-center">
                  <Target className="h-4 w-4 mr-2 text-primary" />
                  {goal}
                </li>
              ))}
            </ul>
          </div>
          
          <div>
            <h3 className="font-semibold mb-3">Quest Types</h3>
            <div className="flex flex-wrap gap-2">
              {track.questTypes.map(type => (
                <Badge key={type} variant="secondary">
                  {type}
                </Badge>
              ))}
            </div>
            
            <h3 className="font-semibold mb-3 mt-4">Mentor Expertise</h3>
            <div className="flex flex-wrap gap-2">
              {track.mentorExpertise.map(expertise => (
                <Badge key={expertise} variant="outline">
                  {expertise}
                </Badge>
              ))}
            </div>
          </div>
        </div>
      </CardContent>
    </Card>
  );
}
```

## üéØ Testing

- Track selection saves correctly
- Quests filtered by track
- Mentor recommendations updated
- Track change functionality works

## üí° Notes

- Allow track changes within first week
- Track completion rates by track
- Consider hybrid tracks later
- Pre-populate track-specific quests

## üö® Potential Issues

- **Quest reassignment**: Handle in-progress quests
- **Track switching**: Limit frequency
- **Data migration**: Existing users need default track